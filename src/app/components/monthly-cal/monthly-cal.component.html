<mat-card class="dashboard-card">
  <div class="dashboard-header">
    <mat-icon>dashboard</mat-icon>
    <h5>Monthly Dashboard</h5>
  </div>
  
  <mat-form-field appearance="outline">
    <mat-label>Select Month</mat-label>
    <mat-select [(ngModel)]="selectedMonth">
      <mat-option *ngFor="let month of months" [value]="month">{{ month }}</mat-option>
    </mat-select>
  </mat-form-field>
  
  <mat-form-field appearance="outline">
    <mat-label>Select Year</mat-label>
    <mat-select [(ngModel)]="selectedYear">
      <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
    </mat-select>
  </mat-form-field>
  
  <button mat-raised-button (click)="onSubmit()">Submit</button>
  
  <!-- Main Cards Section -->
  <div class="main-card-wrapper">
    <div class="main-card-container">
      <mat-card class="main-card">
        <h4 class="main-card-heading">Total Sell Amount</h4>
        <div class="main-card-content">
          <h2 class="money-text">₹ {{ overallMoney }}</h2>
        </div>
      </mat-card>

      <mat-card class="main-card">
        <h4 class="main-card-heading">Total Amount to be Collected</h4>
        <div class="main-card-content">
          <h2 class="money-text">₹ {{ totalCollected }}</h2>
        </div>
      </mat-card>

      <mat-card class="main-card">
        <h4 class="main-card-heading">Total Amount Collected</h4>
        <div class="main-card-content">
          <h2 class="money-text">₹ {{ totalCollected }}</h2>
        </div>
      </mat-card>

      <mat-card class="main-card">
        <h4 class="main-card-heading">Total Amount Deposited to Bank</h4>
        <div class="main-card-content">
          <h2 class="money-text">₹ {{ totalCollected }}</h2>
        </div>
      </mat-card>
    </div>
  </div>

  <!-- Accordion Start -->
  <mat-accordion class="dashboard-accordion" multi>
    <!-- Machine Money Section -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Money Generated by Machine</mat-panel-title>
      </mat-expansion-panel-header>
      <div class="machine-money-container">
        <mat-card *ngFor="let machine of machines" class="machine-money-card">
          <div class="machine-details">
            <p><strong>Machine No:</strong> {{ machine.machineNo }}</p>
            <p><strong>Nozzle No:</strong> {{ machine.nozzleNo }}</p>
            <p><strong>Fuel Type:</strong> {{ machine.fuelType }}</p>
          </div>
          <div class="machine-money">
            <h3 class="money-text">₹ {{ machine.moneyGenerated }}</h3>
          </div>
        </mat-card>
      </div>
      <h3 class="overall-heading">Overall: ₹ {{ overallMoney }}</h3>
    </mat-expansion-panel>

    <!-- Testing Expenses -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Testing Expenses</mat-panel-title>
      </mat-expansion-panel-header>
      <div class="machine-money-container">
        <mat-card *ngFor="let test of testingExpenses" class="testing-card">
          <div class="machine-details">
            <p><strong>Machine No:</strong> {{ test.machineNo }}</p>
            <p><strong>Liters Used:</strong> {{ test.liters }} L</p>
          </div>
          <div class="testing-money">
            <h3 class="money-text">₹ {{ test.amount }}</h3>
          </div>
        </mat-card>
      </div>
      <h3 class="overall-heading">Total: ₹ {{ totalTestingExpense }}</h3>
    </mat-expansion-panel>

    <!-- Pump Expenses -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Pump Expenses</mat-panel-title>
      </mat-expansion-panel-header>
      <mat-table
        [dataSource]="pumpExpenses"
        class="expenses-table mat-elevation-z2"
      >
        <ng-container matColumnDef="type">
          <mat-header-cell *matHeaderCellDef> Expense Type </mat-header-cell>
          <mat-cell *matCellDef="let expense"> {{ expense.type }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="amount">
          <mat-header-cell *matHeaderCellDef> Amount (₹) </mat-header-cell>
          <mat-cell *matCellDef="let expense">
            ₹ {{ expense.amount }}
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="expenseColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: expenseColumns"></mat-row>
      </mat-table>
      <h3 class="overall-heading">Total: ₹ {{ totalTestingExpense }}</h3>
    </mat-expansion-panel>

    <!-- Personal Expenses -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Personal Expenses</mat-panel-title>
      </mat-expansion-panel-header>
      <mat-table
        [dataSource]="personalExpenses"
        class="expenses-table mat-elevation-z2"
      >
        <ng-container matColumnDef="type">
          <mat-header-cell *matHeaderCellDef> Expense Type </mat-header-cell>
          <mat-cell *matCellDef="let expense"> {{ expense.type }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="amount">
          <mat-header-cell *matHeaderCellDef> Amount (₹) </mat-header-cell>
          <mat-cell *matCellDef="let expense">
            ₹ {{ expense.amount }}
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="expenseColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: expenseColumns"></mat-row>
      </mat-table>
      <h3 class="overall-heading">Total: ₹ {{ totalTestingExpense }}</h3>
    </mat-expansion-panel>

    <!-- Creditors / Lenders -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Creditors & Lenders</mat-panel-title>
      </mat-expansion-panel-header>
      <mat-table
        [dataSource]="creditors"
        class="expenses-table mat-elevation-z2"
      >
        <ng-container matColumnDef="name">
          <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
          <mat-cell *matCellDef="let c"> {{ c.name }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="amount">
          <mat-header-cell *matHeaderCellDef> Amount </mat-header-cell>
          <mat-cell *matCellDef="let c">
            <span [ngStyle]="{ color: c.type === 'lender' ? 'green' : 'red' }">
              ₹ {{ c.amount }}
            </span>
          </mat-cell>
          <h3 class="overall-heading">Total: ₹ {{ totalTestingExpense }}</h3>
        </ng-container>

        <mat-header-row *matHeaderRowDef="creditorColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: creditorColumns"></mat-row>
      </mat-table>
      <h3 class="overall-heading">Total: ₹ {{ totalTestingExpense }}</h3>
    </mat-expansion-panel>

    <!-- PhonePe and Card Swipe -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>PhonePe & Card Swipe</mat-panel-title>
      </mat-expansion-panel-header>
      <div class="transaction-section">
        <mat-card class="transaction-card">
          <h4>PhonePe</h4>
          <p>₹ {{ phonePeAmount }}</p>
        </mat-card>
        <mat-card class="transaction-card">
          <h4>Card Swipe</h4>
          <p>₹ {{ cardSwipeAmount }}</p>
        </mat-card>
      </div>
      <h3 class="overall-heading">Total: ₹ {{ totalTestingExpense }}</h3>
    </mat-expansion-panel>

    <!-- Coins & Notes -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Money Collected (Coins & Notes)</mat-panel-title>
      </mat-expansion-panel-header>
      <mat-table
        [dataSource]="moneyCollection"
        class="expenses-table mat-elevation-z2"
      >
        <ng-container matColumnDef="type">
          <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
          <mat-cell *matCellDef="let entry">
            {{ entry.type | titlecase }}
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="denomination">
          <mat-header-cell *matHeaderCellDef> Denomination </mat-header-cell>
          <mat-cell *matCellDef="let entry">
            {{ entry.denomination }} ₹
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="count">
          <mat-header-cell *matHeaderCellDef> Count </mat-header-cell>
          <mat-cell *matCellDef="let entry"> {{ entry.count }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="total">
          <mat-header-cell *matHeaderCellDef> Total (₹) </mat-header-cell>
          <mat-cell *matCellDef="let entry">
            ₹ {{ entry.denomination * entry.count }}
          </mat-cell>
        </ng-container>

        <mat-header-row
          *matHeaderRowDef="moneyCollectionColumns"
        ></mat-header-row>
        <mat-row
          *matRowDef="let row; columns: moneyCollectionColumns"
        ></mat-row>
      </mat-table>

      <h3 class="overall-heading">
        Total Money Collected: ₹ {{ totalCollected }}
      </h3>
    </mat-expansion-panel>
  </mat-accordion>
</mat-card>
